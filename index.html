<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>‚ù§Ô∏è Lipsy, Happy Valentine‚Äôs ‚ù§Ô∏è</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  min-height:100vh;
  background:radial-gradient(circle at center,#4a001d,#000 70%);
  display:flex;
  align-items:center;
  justify-content:center;
  font-family:'Poppins',sans-serif;
  overflow:hidden;
  color:#fff;
}
.petal{
  position:fixed;top:-40px;width:18px;height:18px;
  background:radial-gradient(circle,#ff9aa2,#ff4d6d);
  border-radius:50% 50% 50% 0;
  transform:rotate(45deg);opacity:.8;
  pointer-events:none;animation:fall linear infinite;
}
@keyframes fall{to{transform:translateY(110vh) rotate(360deg)}}
.envelope{
  width:160px;height:105px;background:#fff;border-radius:18px;
  cursor:pointer;position:absolute;animation:bounce 2s infinite;
}
@keyframes bounce{50%{transform:translateY(-8px)}}
.envelope::before{
  content:"";position:absolute;inset:0;border:2px solid #ff8fab;border-radius:18px;
}
.flap{
  position:absolute;top:0;width:100%;height:55%;
  background:linear-gradient(135deg,#ff8fab,#ff4d6d);
  transform-origin:top;transition:1s;
}
.envelope.open .flap{transform:rotateX(-180deg)}
.card-stack{display:none;width:90%;max-width:520px;text-align:center}
.card{
  background:linear-gradient(180deg,#1c000a,#3a0018);
  border-radius:30px;padding:60px 40px;min-height:330px;
  box-shadow:0 30px 80px rgba(0,0,0,.8);
}
.exit-left{animation:exitLeft .45s forwards}
.exit-right{animation:exitRight .45s forwards}
.enter{animation:enter .45s}
@keyframes exitLeft{to{opacity:0;transform:translateX(-140px)}}
@keyframes exitRight{to{opacity:0;transform:translateX(140px)}}
@keyframes enter{from{opacity:0;transform:translateX(40px)}to{opacity:1}}
.ring{
  width:90px;height:90px;border:4px solid gold;border-radius:50%;
  margin:0 auto 20px;box-shadow:0 0 25px gold;
}
h1{font-family:'Playfair Display',serif;font-size:2.2rem;margin-bottom:15px}
p{font-size:1.05rem;line-height:1.7;color:#ffd9e1}
.choice{display:flex;gap:18px;justify-content:center;margin-top:25px}
.choice div{
  padding:14px 24px;border-radius:22px;cursor:pointer;
  background:#ff4d6d;transition:.3s;
}
.choice div:hover{transform:scale(1.1)}
.dots{display:flex;justify-content:center;gap:8px;margin-top:20px}
.dot{width:10px;height:10px;background:#ff8fab55;border-radius:50%}
.dot.active{background:#ff4d6d}
.modal{
  position:fixed;inset:0;background:rgba(0,0,0,.75);
  display:none;align-items:center;justify-content:center;
}
.modal-content{
  background:#2a0012;padding:30px;border-radius:25px;
  width:90%;max-width:400px;text-align:center;
}
textarea{
  width:100%;height:120px;border-radius:12px;border:none;padding:10px;
}
button{
  margin-top:15px;padding:10px 24px;border:none;border-radius:16px;
  background:#ff4d6d;color:#fff;cursor:pointer;
}
</style>
</head>

<body>

<div class="envelope" id="envelope"><div class="flap"></div></div>

<div class="card-stack" id="stack">
  <div class="card" id="card"></div>
  <div class="dots" id="dots"></div>
</div>

<div class="modal" id="modal">
  <div class="modal-content">
    <h3>üíå Your message</h3>
    <textarea id="userMessage" placeholder="Type your message here..."></textarea>
    <button onclick="saveOnline()">Send ‚ù§Ô∏è</button>
  </div>
</div>

<script>
const cards=[
 {t:"Happy Valentine‚Äôs, Lipsy",m:"The Mona Lisa would still be the greatest art‚Ä¶ if your smile didn‚Äôt exist‚ù§Ô∏è."},
 {t:"üåπ Rose Day",m:"Like a rose, my love for you is beautiful, deep, and forever blooming"},
 {t:"üíç Propose Day",m:"If feelings could become promises, mine would always choose you."},
 {t:"üç´ Chocolate Day",m:"Life feels sweeter with you, just like chocolate melts into the heart"},
 {t:"üß∏ Teddy Day",m:"Like a teddy, I want to be the comfort you hold onto every night"},
 {t:"ü§û Promise Day",m:"I promise to love you in every season, through every smile and every storm."},
 {t:"ü§ó Hug Day",m:"If I could pause time, it would be in your hug"},
 {t:"üíã Kiss Day",m:"Your presence leaves a warmth I carry all day."},
 {t:"‚ù§Ô∏è Valentine‚Äôs Day",m:"Any message for me?"}
];

let index=0,startX=0;
const card=document.getElementById("card");
const dots=document.getElementById("dots");

function render(){
  const c=cards[index];
  let html="";
  if(c.t.includes("Propose")) html+='<div class="ring"></div>';
  html+=`<h1>${c.t}</h1><p>${c.m}</p>`;
  if(index===cards.length-1){
    html+=`<div class="choice"><div onclick="openModal()">YES üíñ</div></div>`;
  }
  card.innerHTML=html;
  dots.innerHTML=cards.map((_,i)=>`<div class="dot ${i===index?'active':''}"></div>`).join("");
}
function openModal(){modal.style.display="flex"}
function closeModal(){modal.style.display="none"}
envelope.onclick=()=>{
  envelope.classList.add("open");
  setTimeout(()=>{envelope.style.display="none";stack.style.display="block";render();},800);
};
</script>

<!-- üî• FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, addDoc, collection, serverTimestamp }
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyC7ihEC108GG-FL7cJWidiC4uc2B-7kv_Y",
  authDomain: "msgl-157b0.firebaseapp.com",
  projectId: "msgl-157b0",
  storageBucket: "msgl-157b0.firebasestorage.app",
  messagingSenderId: "862235386858",
  appId: "1:862235386858:web:c2123cb0c7405d1fba0893",
  measurementId: "G-2LNL5C57VZ"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.saveOnline = async function(){
  const text = document.getElementById("userMessage").value.trim();
  if(!text){ alert("Write something ‚ù§Ô∏è"); return; }

  await addDoc(collection(db,"messages"),{
    message:text,
    time:serverTimestamp()
  });

  alert("Message sent ‚ù§Ô∏è");
  document.getElementById("userMessage").value="";
  closeModal();
};
</script>

</body>
</html>
